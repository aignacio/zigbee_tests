###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.30.1.41636 for 8051             27/Jun/2014  01:55:48 #
# Copyright 2004-2013 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#                                                                             #
#    Source file        =  C:\Texas Instruments\ZStack-CC2530-2.5.1a\Projects #
#                          \zstack\Samples\ParkWay\Source\PW_Coordinator.c    #
#    Command line       =  -f "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Proj #
#                          ects\zstack\Samples\ParkWay\CC2530DB\..\..\..\Tool #
#                          s\CC2530DB\f8wCoord.cfg" (-DCPU32MHZ               #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8       #
#                          -DMAC_CFG_RX_MAX=5 -DZDO_COORDINATOR -DRTR_NWK)    #
#                          -f "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Proj #
#                          ects\zstack\Samples\ParkWay\CC2530DB\..\..\..\Tool #
#                          s\CC2530DB\f8wConfig.cfg" (-DZIGBEEPRO -DSECURE=0  #
#                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                  #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 "C:\Texas                   #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\Source\PW_Coordinator.c" -D         #
#                          ZTOOL_P1 -D MT_TASK -D MT_SYS_FUNC -D MT_ZDO_FUNC  #
#                          -D LCD_SUPPORTED=DEBUG -D NV_RESTORE -lC           #
#                          "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Project #
#                          s\zstack\Samples\ParkWay\CC2530DB\CoordinatorEB\Li #
#                          st\" -lA "C:\Texas Instruments\ZStack-CC2530-2.5.1 #
#                          a\Projects\zstack\Samples\ParkWay\CC2530DB\Coordin #
#                          atorEB\List\" --diag_suppress Pe001,Pa010 -o       #
#                          "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Project #
#                          s\zstack\Samples\ParkWay\CC2530DB\CoordinatorEB\Ob #
#                          j\" -e --no_code_motion --debug --core=plain       #
#                          --dptr=16,1 --data_model=large                     #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 8 -I "C:\Texas                   #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\CC2530DB\" -I "C:\Texas             #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\CC2530DB\..\Source\" -I "C:\Texas   #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\CC2530DB\..\..\..\ZMain\TI2530DB\"  #
#                          -I "C:\Texas Instruments\ZStack-CC2530-2.5.1a\Proj #
#                          ects\zstack\Samples\ParkWay\CC2530DB\..\..\..\..\. #
#                          .\Components\hal\include\" -I "C:\Texas            #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\CC2530DB\..\..\..\..\..\Components\ #
#                          hal\target\CC2530EB\" -I "C:\Texas                 #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\CC2530DB\..\..\..\..\..\Components\ #
#                          mac\include\" -I "C:\Texas                         #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\CC2530DB\..\..\..\..\..\Components\ #
#                          mac\high_level\" -I "C:\Texas                      #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\CC2530DB\..\..\..\..\..\Components\ #
#                          mac\low_level\srf04\" -I "C:\Texas                 #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\CC2530DB\..\..\..\..\..\Components\ #
#                          mac\low_level\srf04\single_chip\" -I "C:\Texas     #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\CC2530DB\..\..\..\..\..\Components\ #
#                          mt\" -I "C:\Texas Instruments\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\ParkWay\CC2530DB\..\..\.. #
#                          \..\..\Components\osal\include\" -I "C:\Texas      #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\CC2530DB\..\..\..\..\..\Components\ #
#                          services\saddr\" -I "C:\Texas                      #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\CC2530DB\..\..\..\..\..\Components\ #
#                          services\sdata\" -I "C:\Texas                      #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\CC2530DB\..\..\..\..\..\Components\ #
#                          stack\af\" -I "C:\Texas Instruments\ZStack-CC2530- #
#                          2.5.1a\Projects\zstack\Samples\ParkWay\CC2530DB\.. #
#                          \..\..\..\..\Components\stack\nwk\" -I "C:\Texas   #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\CC2530DB\..\..\..\..\..\Components\ #
#                          stack\sapi\" -I "C:\Texas                          #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\CC2530DB\..\..\..\..\..\Components\ #
#                          stack\sec\" -I "C:\Texas                           #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\CC2530DB\..\..\..\..\..\Components\ #
#                          stack\sys\" -I "C:\Texas                           #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\CC2530DB\..\..\..\..\..\Components\ #
#                          stack\zdo\" -I "C:\Texas                           #
#                          Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\ParkWay\CC2530DB\..\..\..\..\..\Components\ #
#                          zmac\" -I "C:\Texas Instruments\ZStack-CC2530-2.5. #
#                          1a\Projects\zstack\Samples\ParkWay\CC2530DB\..\..\ #
#                          ..\..\..\Components\zmac\f8w\" -Ohz                #
#                          --require_prototypes                               #
#    List file          =  C:\Texas Instruments\ZStack-CC2530-2.5.1a\Projects #
#                          \zstack\Samples\ParkWay\CC2530DB\CoordinatorEB\Lis #
#                          t\PW_Coordinator.lst                               #
#    Object file        =  C:\Texas Instruments\ZStack-CC2530-2.5.1a\Projects #
#                          \zstack\Samples\ParkWay\CC2530DB\CoordinatorEB\Obj #
#                          \PW_Coordinator.r51                                #
#                                                                             #
#                                                                             #
###############################################################################

C:\Texas Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\ParkWay\Source\PW_Coordinator.c
      1          /*****************************************************************************
      2            Project: Park Way (ZigBee)
      3            Coordinator Firmware
      4          
      5            Ver.: 1.0
      6            Date: 26/06/14
      7            Developer:  Ânderson Ignácio da Silva
      8            Obs.:
      9              HAL_UART=TRUE - Enables UART on device
     10          
     11            Pre-processor directives:
     12          
     13                
     14          
     15          *****************************************************************************/
     16          
     17          
     18          /*********************************************************************
     19           * INCLUDES
     20           */
     21          #include "OSAL.h"
     22          #include "AF.h"
     23          #include "ZDApp.h"
     24          #include "ZDObject.h"
     25          #include "ZDProfile.h"
     26          #include "ParkWay.h"
     27          #include "DebugTrace.h"
     28          #include "OnBoard.h"
     29          /* HAL */
     30          #include "hal_lcd.h"
     31          #include "hal_led.h"
     32          #include "hal_key.h"
     33          #include "hal_uart.h"
     34           
     35          
     36          /*********************************************************************
     37           * MACROS
     38           */
     39          
     40          /*********************************************************************
     41           * CONSTANTS
     42           */
     43          #define   TIME_PARKWAY_POLL   2000
     44          /*********************************************************************
     45           * TYPEDEFS
     46           */
     47          
     48          /*********************************************************************
     49           * GLOBAL VARIABLES
     50           */
     51          // This list should be filled with Application specific Cluster IDs.

   \                                 In  segment XDATA_ROM_C, align 1
     52          const cId_t ParkWay_ClusterList[ParkWay_MAX_CLUSTERS] =
   \                     ParkWay_ClusterList:
   \   000000   0100         DW 1
     53          {
     54            ParkWay_CLUSTERID
     55          };
     56          

   \                                 In  segment XDATA_ROM_C, align 1
     57          const SimpleDescriptionFormat_t ParkWay_SimpleDesc =
   \                     ParkWay_SimpleDesc:
   \   000000   0A           DB 10
   \   000001   040F         DW 3844
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   01           DB 1
   \   000007   ....         DW ParkWay_ClusterList
   \   000009   01           DB 1
   \   00000A   ....         DW ParkWay_ClusterList
     58          {
     59            ParkWay_ENDPOINT,              //  int Endpoint;
     60            ParkWay_PROFID,                //  uint16 AppProfId[2];
     61            ParkWay_DEVICEID,              //  uint16 AppDeviceId[2];
     62            ParkWay_DEVICE_VERSION,        //  int   AppDevVer:4;
     63            ParkWay_FLAGS,                 //  int   AppFlags:4;
     64            ParkWay_MAX_CLUSTERS,          //  byte  AppNumInClusters;
     65            (cId_t *)ParkWay_ClusterList,  //  byte *pAppInClusterList;
     66            ParkWay_MAX_CLUSTERS,          //  byte  AppNumInClusters;
     67            (cId_t *)ParkWay_ClusterList   //  byte *pAppInClusterList;
     68          };
     69          
     70          // This is the Endpoint/Interface description.  It is defined here, but
     71          // filled-in in ParkWay_Init().  Another way to go would be to fill
     72          // in the structure here and make it a "const" (in code space).  The
     73          // way it's defined in this sample app it is define in RAM.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     74          endPointDesc_t ParkWay_epDesc;
   \                     ParkWay_epDesc:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z
     75          
     76          /*********************************************************************
     77           * EXTERNAL VARIABLES
     78           */
     79          
     80          /*********************************************************************
     81           * EXTERNAL FUNCTIONS
     82           */
     83          
     84          /*********************************************************************
     85           * LOCAL VARIABLES
     86           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     87          byte ParkWay_TaskID;   // Task ID for internal task/event processing
   \                     ParkWay_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
     88                                    // This variable will be received when
     89                                    // ParkWay_Init() is called.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     90          devStates_t ParkWay_NwkState;
   \                     ParkWay_NwkState:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
     91          
     92          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     93          byte ParkWay_TransID;  // This is the unique message ID (counter)
   \                     ParkWay_TransID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
     94          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     95          afAddrType_t ParkWay_DstAddr;
   \                     ParkWay_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
     96          
     97          /*********************************************************************
     98           * LOCAL FUNCTIONS
     99           */
    100          void SendUART(uint8 *data,uint8 len);
    101          void uart_init(void);

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    102          static uint8 DevListPW[20][6];        //Devices Vector for PARK WAY 
   \                     DevListPW:
   \   000000                DS 120
   \   000078                REQUIRE __INIT_XDATA_Z
    103          
    104          static void ParkWay_ProcessZDOMsgs( zdoIncomingMsg_t *inMsg );
    105          static void ParkWay_HandleKeys( byte shift, byte keys );
    106          static void ParkWay_MessageMSGCB( afIncomingMSGPacket_t *pckt );
    107          static void ParkWay_SendTheMessage( void );
    108          
    109          /*********************************************************************
    110           * NETWORK LAYER CALLBACKS
    111           */
    112          
    113          /*********************************************************************
    114           * PUBLIC FUNCTIONS
    115           */
    116          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    117          void ParkWay_Init( uint8 task_id )
   \                     ParkWay_Init:
    118          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
    119            ParkWay_TaskID = task_id;
   \   000006   90....       MOV     DPTR,#ParkWay_TaskID
   \   000009   F0           MOVX    @DPTR,A
    120            ParkWay_NwkState = DEV_INIT;
   \   00000A   90....       MOV     DPTR,#ParkWay_NwkState
   \   00000D   7401         MOV     A,#0x1
   \   00000F   F0           MOVX    @DPTR,A
    121            ParkWay_TransID = 0;
   \   000010   90....       MOV     DPTR,#ParkWay_TransID
   \   000013   E4           CLR     A
   \   000014   F0           MOVX    @DPTR,A
    122          
    123            // Device hardware initialization can be added here or in main() (Zmain.c).
    124            // If the hardware is application specific - add it here.
    125            // If the hardware is other parts of the device add it in main().
    126          
    127            ParkWay_DstAddr.addrMode = (afAddrMode_t)AddrNotPresent;
   \   000015   90....       MOV     DPTR,#ParkWay_DstAddr + 8
   \   000018   F0           MOVX    @DPTR,A
    128            ParkWay_DstAddr.endPoint = 0;
   \   000019   A3           INC     DPTR
   \   00001A   F0           MOVX    @DPTR,A
    129            ParkWay_DstAddr.addr.shortAddr = 0;
   \   00001B   90....       MOV     DPTR,#ParkWay_DstAddr
   \   00001E   F0           MOVX    @DPTR,A
   \   00001F   A3           INC     DPTR
   \   000020   F0           MOVX    @DPTR,A
    130          
    131            // Fill out the endpoint description.
    132            ParkWay_epDesc.endPoint = ParkWay_ENDPOINT;
   \   000021   90....       MOV     DPTR,#ParkWay_epDesc
   \   000024   740A         MOV     A,#0xa
   \   000026   F0           MOVX    @DPTR,A
    133            ParkWay_epDesc.task_id = &ParkWay_TaskID;
   \   000027   A3           INC     DPTR
   \   000028   74..         MOV     A,#ParkWay_TaskID & 0xff
   \   00002A   F0           MOVX    @DPTR,A
   \   00002B   A3           INC     DPTR
   \   00002C   74..         MOV     A,#(ParkWay_TaskID >> 8) & 0xff
   \   00002E   F0           MOVX    @DPTR,A
    134            ParkWay_epDesc.simpleDesc
    135                      = (SimpleDescriptionFormat_t *)&ParkWay_SimpleDesc;
   \   00002F   A3           INC     DPTR
   \   000030   74..         MOV     A,#ParkWay_SimpleDesc & 0xff
   \   000032   F0           MOVX    @DPTR,A
   \   000033   A3           INC     DPTR
   \   000034   74..         MOV     A,#(ParkWay_SimpleDesc >> 8) & 0xff
   \   000036   F0           MOVX    @DPTR,A
    136            ParkWay_epDesc.latencyReq = noLatencyReqs;
   \   000037   A3           INC     DPTR
   \   000038   E4           CLR     A
   \   000039   F0           MOVX    @DPTR,A
    137          
    138            // Register the endpoint description with the AF
    139            afRegister( &ParkWay_epDesc );
   \   00003A                ; Setup parameters for call to function afRegister
   \   00003A   7A..         MOV     R2,#ParkWay_epDesc & 0xff
   \   00003C   7B..         MOV     R3,#(ParkWay_epDesc >> 8) & 0xff
   \   00003E   12....       LCALL   ??afRegister?relay   ; Banked call to: afRegister
    140          
    141            // Register for all key events - This app will handle all key events
    142            RegisterForKeys( ParkWay_TaskID );
   \   000041                ; Setup parameters for call to function RegisterForKeys
   \   000041   90....       MOV     DPTR,#ParkWay_TaskID
   \   000044   E0           MOVX    A,@DPTR
   \   000045   F9           MOV     R1,A
   \   000046   12....       LCALL   ??RegisterForKeys?relay; Banked call to: RegisterForKeys
    143          
    144            // Update the display
    145          #if defined ( LCD_SUPPORTED )
    146            HalLcdWriteString( "ParkWay-Coord", HAL_LCD_LINE_1 );
   \   000049                ; Setup parameters for call to function HalLcdWriteString
   \   000049   7901         MOV     R1,#0x1
   \   00004B   7A..         MOV     R2,#`?<Constant "ParkWay-Coord">` & 0xff
   \   00004D   7B..         MOV     R3,#(`?<Constant "ParkWay-Coord">` >> 8) & 0xff
   \   00004F   12....       LCALL   ??HalLcdWriteString?relay; Banked call to: HalLcdWriteString
    147          #endif
    148          
    149            ZDO_RegisterForZDOMsg( ParkWay_TaskID, End_Device_Bind_rsp );
   \   000052                ; Setup parameters for call to function ZDO_RegisterForZDOMsg
   \   000052   7A20         MOV     R2,#0x20
   \   000054   7B80         MOV     R3,#-0x80
   \   000056   90....       MOV     DPTR,#ParkWay_TaskID
   \   000059   E0           MOVX    A,@DPTR
   \   00005A   F9           MOV     R1,A
   \   00005B   12....       LCALL   ??ZDO_RegisterForZDOMsg?relay; Banked call to: ZDO_RegisterForZDOMsg
    150            ZDO_RegisterForZDOMsg( ParkWay_TaskID, Match_Desc_rsp );
   \   00005E                ; Setup parameters for call to function ZDO_RegisterForZDOMsg
   \   00005E   7A06         MOV     R2,#0x6
   \   000060   7B80         MOV     R3,#-0x80
   \   000062   90....       MOV     DPTR,#ParkWay_TaskID
   \   000065   E0           MOVX    A,@DPTR
   \   000066   F9           MOV     R1,A
   \   000067   12....       LCALL   ??ZDO_RegisterForZDOMsg?relay; Banked call to: ZDO_RegisterForZDOMsg
    151          
    152            osal_start_timerEx(   ParkWay_TaskID,
    153                                  POLL_PARWAY_EVT,
    154                                  TIME_PARKWAY_POLL);
   \   00006A                ; Setup parameters for call to function osal_start_timerEx
   \   00006A   7CD0         MOV     R4,#-0x30
   \   00006C   7D07         MOV     R5,#0x7
   \   00006E   7A03         MOV     R2,#0x3
   \   000070   7B00         MOV     R3,#0x0
   \   000072   90....       MOV     DPTR,#ParkWay_TaskID
   \   000075   E0           MOVX    A,@DPTR
   \   000076   F9           MOV     R1,A
   \   000077   12....       LCALL   ??osal_start_timerEx?relay; Banked call to: osal_start_timerEx
    155          }
   \   00007A                REQUIRE ?Subroutine0
   \   00007A                ; // Fall through to label ?Subroutine0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   7F01         MOV     R7,#0x1
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    156          
    157          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    158          uint16 ParkWay_ProcessEvent( uint8 task_id, uint16 events )
   \                     ParkWay_ProcessEvent:
    159          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    160            afIncomingMSGPacket_t *MSGpkt;
    161            afDataConfirm_t *afDataConfirm;
                                    ^
Warning[Pe177]: variable "afDataConfirm" was declared but never referenced
    162            zAddrType_t dstAddr;
                               ^
Warning[Pe177]: variable "dstAddr" was declared but never referenced
    163            // Data Confirmation message fields
    164            byte sentEP;
                        ^
Warning[Pe177]: variable "sentEP" was declared but never referenced
    165            ZStatus_t sentStatus;
                             ^
Warning[Pe177]: variable "sentStatus" was declared but never referenced
    166            byte sentTransID;       // This should match the value sent
                        ^
Warning[Pe177]: variable "sentTransID" was declared but never referenced
    167            (void)task_id;  // Intentionally unreferenced parameter
    168          
    169            if ( events & SYS_EVENT_MSG )
   \   000009   5480         ANL     A,#0x80
   \   00000B   7003         JNZ     $+5
   \   00000D   02....       LJMP    ??ParkWay_ProcessEvent_0 & 0xFFFF
    170            {
    171              MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( ParkWay_TaskID );
   \   000010                ; Setup parameters for call to function osal_msg_receive
   \   000010   8063         SJMP    ??ParkWay_ProcessEvent_1
    172              while ( MSGpkt )
    173              {
    174                switch ( MSGpkt->hdr.event )
    175                {
    176                  case ZDO_CB_MSG:
    177                    ParkWay_ProcessZDOMsgs( (zdoIncomingMsg_t *)MSGpkt );
    178                    break;
    179          
    180                  case AF_DATA_CONFIRM_CMD:
    181                    break;
    182          
    183                  case AF_INCOMING_MSG_CMD:
    184                    ParkWay_MessageMSGCB( MSGpkt );
   \                     ??ParkWay_ProcessEvent_2:
   \   000012   E5..         MOV     A,?V0
   \   000014   2422         ADD     A,#0x22
   \   000016   12....       LCALL   ?Subroutine1 & 0xFFFF
   \                     ??CrossCallReturnLabel_0:
   \   000019   F9           MOV     R1,A
   \   00001A   8882         MOV     DPL,R0
   \   00001C   8983         MOV     DPH,R1
   \   00001E   A3           INC     DPTR
   \   00001F   A3           INC     DPTR
   \   000020   A3           INC     DPTR
   \   000021   E0           MOVX    A,@DPTR
   \   000022   FA           MOV     R2,A
   \   000023   75F00A       MOV     B,#0xa
   \   000026   8882         MOV     DPL,R0
   \   000028   8983         MOV     DPH,R1
   \   00002A   A3           INC     DPTR
   \   00002B   A3           INC     DPTR
   \   00002C   E0           MOVX    A,@DPTR
   \   00002D   A4           MUL     AB
   \   00002E   2A           ADD     A,R2
   \   00002F   24F0         ADD     A,#-0x10
   \   000031   F5..         MOV     ?V4,A
   \   000033   75..00       MOV     ?V3,#0x0
   \                     ??ParkWay_ProcessEvent_3:
   \   000036   85..82       MOV     DPL,?V3
   \   000039   AA82         MOV     R2,DPL
   \   00003B   E8           MOV     A,R0
   \   00003C   2A           ADD     A,R2
   \   00003D   F582         MOV     DPL,A
   \   00003F   E4           CLR     A
   \   000040   39           ADDC    A,R1
   \   000041   F583         MOV     DPH,A
   \   000043   E0           MOVX    A,@DPTR
   \   000044   C0E0         PUSH    A
   \   000046   E5..         MOV     A,?V4
   \   000048   75F006       MOV     B,#0x6
   \   00004B   A4           MUL     AB
   \   00004C   FC           MOV     R4,A
   \   00004D   85F0..       MOV     ?V2,B
   \   000050   AD..         MOV     R5,?V2
   \   000052   74..         MOV     A,#DevListPW & 0xff
   \   000054   2C           ADD     A,R4
   \   000055   FC           MOV     R4,A
   \   000056   74..         MOV     A,#(DevListPW >> 8) & 0xff
   \   000058   3D           ADDC    A,R5
   \   000059   FD           MOV     R5,A
   \   00005A   EC           MOV     A,R4
   \   00005B   2A           ADD     A,R2
   \   00005C   F582         MOV     DPL,A
   \   00005E   E4           CLR     A
   \   00005F   3D           ADDC    A,R5
   \   000060   F583         MOV     DPH,A
   \   000062   D0E0         POP     A
   \   000064   F0           MOVX    @DPTR,A
   \   000065   05..         INC     ?V3
   \   000067   E5..         MOV     A,?V3
   \   000069   C3           CLR     C
   \   00006A   9406         SUBB    A,#0x6
   \   00006C   40C8         JC      ??ParkWay_ProcessEvent_3
    185                    break;
    186          
    187                  case ZDO_STATE_CHANGE:
    188                    break;
    189          
    190                  default:
    191                    break;
    192                }
    193          
    194                // Release the memory
    195                osal_msg_deallocate( (uint8 *)MSGpkt );
   \                     ??ParkWay_ProcessEvent_4:
   \   00006E                ; Setup parameters for call to function osal_msg_deallocate
   \   00006E   AA..         MOV     R2,?V0
   \   000070   AB..         MOV     R3,?V1
   \   000072   12....       LCALL   ??osal_msg_deallocate?relay; Banked call to: osal_msg_deallocate
    196          
    197                // Next
    198                MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( ParkWay_TaskID );
   \   000075                ; Setup parameters for call to function osal_msg_receive
   \                     ??ParkWay_ProcessEvent_1:
   \   000075   90....       MOV     DPTR,#ParkWay_TaskID
   \   000078   E0           MOVX    A,@DPTR
   \   000079   F9           MOV     R1,A
   \   00007A   12....       LCALL   ??osal_msg_receive?relay; Banked call to: osal_msg_receive
   \   00007D   8A..         MOV     ?V0,R2
   \   00007F   8B..         MOV     ?V1,R3
   \   000081   E5..         MOV     A,?V0
   \   000083   45..         ORL     A,?V1
   \   000085   7003         JNZ     $+5
   \   000087   02....       LJMP    ??ParkWay_ProcessEvent_5 & 0xFFFF
   \   00008A   85..82       MOV     DPL,?V0
   \   00008D   85..83       MOV     DPH,?V1
   \   000090   E0           MOVX    A,@DPTR
   \   000091   24E6         ADD     A,#-0x1a
   \   000093   7003         JNZ     $+5
   \   000095   02....       LJMP    ??ParkWay_ProcessEvent_2 & 0xFFFF
   \   000098   2447         ADD     A,#0x47
   \   00009A   70D2         JNZ     ??ParkWay_ProcessEvent_4
   \   00009C   E5..         MOV     A,?V0
   \   00009E   240C         ADD     A,#0xc
   \   0000A0   F582         MOV     DPL,A
   \   0000A2   E4           CLR     A
   \   0000A3   35..         ADDC    A,?V1
   \   0000A5   F583         MOV     DPH,A
   \   0000A7   E0           MOVX    A,@DPTR
   \   0000A8   F5..         MOV     ?V2,A
   \   0000AA   A3           INC     DPTR
   \   0000AB   E0           MOVX    A,@DPTR
   \   0000AC   F5..         MOV     ?V3,A
   \   0000AE   78..         MOV     R0,#?V2
   \   0000B0   12....       LCALL   ?US_SWITCH_SPARSE
   \                     `?<Jumptable for ParkWay_ProcessEvent>_0`:
   \   0000B3   0000         DW        0
   \   0000B5   0200         DW        2
   \   0000B7   0680         DW        32774
   \   0000B9   ....         DW        ??ParkWay_ProcessEvent_6
   \   0000BB   2080         DW        32800
   \   0000BD   ....         DW        ??ParkWay_ProcessEvent_7
   \   0000BF   ....         DW        ??ParkWay_ProcessEvent_4
   \                     ??ParkWay_ProcessEvent_6:
   \   0000C1                ; Setup parameters for call to function ZDO_ParseEPListRsp
   \   0000C1   AA..         MOV     R2,?V0
   \   0000C3   AB..         MOV     R3,?V1
   \   0000C5   12....       LCALL   ??ZDO_ParseEPListRsp?relay; Banked call to: ZDO_ParseEPListRsp
   \   0000C8   8A..         MOV     ?V2,R2
   \   0000CA   8B..         MOV     ?V3,R3
   \   0000CC   EA           MOV     A,R2
   \   0000CD   45..         ORL     A,?V3
   \   0000CF   609D         JZ      ??ParkWay_ProcessEvent_4
   \   0000D1   8A82         MOV     DPL,R2
   \   0000D3   8B83         MOV     DPH,R3
   \   0000D5   E0           MOVX    A,@DPTR
   \   0000D6   7032         JNZ     ??ParkWay_ProcessEvent_8
   \   0000D8   A3           INC     DPTR
   \   0000D9   A3           INC     DPTR
   \   0000DA   A3           INC     DPTR
   \   0000DB   E0           MOVX    A,@DPTR
   \   0000DC   602C         JZ      ??ParkWay_ProcessEvent_8
   \   0000DE   90....       MOV     DPTR,#ParkWay_DstAddr + 8
   \   0000E1   7402         MOV     A,#0x2
   \   0000E3   F0           MOVX    @DPTR,A
   \   0000E4   8A82         MOV     DPL,R2
   \   0000E6   8B83         MOV     DPH,R3
   \   0000E8   A3           INC     DPTR
   \   0000E9   E0           MOVX    A,@DPTR
   \   0000EA   F8           MOV     R0,A
   \   0000EB   A3           INC     DPTR
   \   0000EC   E0           MOVX    A,@DPTR
   \   0000ED   F9           MOV     R1,A
   \   0000EE   90....       MOV     DPTR,#ParkWay_DstAddr
   \   0000F1   E8           MOV     A,R0
   \   0000F2   F0           MOVX    @DPTR,A
   \   0000F3   A3           INC     DPTR
   \   0000F4   E9           MOV     A,R1
   \   0000F5   F0           MOVX    @DPTR,A
   \   0000F6   8A82         MOV     DPL,R2
   \   0000F8   8B83         MOV     DPH,R3
   \   0000FA   A3           INC     DPTR
   \   0000FB   A3           INC     DPTR
   \   0000FC   A3           INC     DPTR
   \   0000FD   A3           INC     DPTR
   \   0000FE   E0           MOVX    A,@DPTR
   \   0000FF   90....       MOV     DPTR,#ParkWay_DstAddr + 9
   \   000102   F0           MOVX    @DPTR,A
   \   000103                ; Setup parameters for call to function HalLedSet
   \   000103   7A01         MOV     R2,#0x1
   \   000105   7901         MOV     R1,#0x1
   \   000107   12....       LCALL   ??HalLedSet?relay    ; Banked call to: HalLedSet
   \                     ??ParkWay_ProcessEvent_8:
   \   00010A                ; Setup parameters for call to function osal_mem_free
   \   00010A   AA..         MOV     R2,?V2
   \   00010C   AB..         MOV     R3,?V3
   \   00010E   12....       LCALL   ??osal_mem_free?relay; Banked call to: osal_mem_free
   \   000111   02....       LJMP    ??ParkWay_ProcessEvent_4 & 0xFFFF
   \                     ??ParkWay_ProcessEvent_7:
   \   000114   E5..         MOV     A,?V0
   \   000116   2413         ADD     A,#0x13
   \   000118   12....       LCALL   ?Subroutine1 & 0xFFFF
    199              }
   \                     ??CrossCallReturnLabel_1:
   \   00011B   F583         MOV     DPH,A
   \   00011D   8882         MOV     DPL,R0
   \   00011F   E0           MOVX    A,@DPTR
   \   000120   700A         JNZ     ??ParkWay_ProcessEvent_9
   \   000122                ; Setup parameters for call to function HalLedSet
   \   000122   7A01         MOV     R2,#0x1
   \                     ??ParkWay_ProcessEvent_10:
   \   000124   7901         MOV     R1,#0x1
   \   000126   12....       LCALL   ??HalLedSet?relay    ; Banked call to: HalLedSet
   \   000129   02....       LJMP    ??ParkWay_ProcessEvent_4 & 0xFFFF
   \                     ??ParkWay_ProcessEvent_9:
   \   00012C                ; Setup parameters for call to function HalLedSet
   \   00012C   7A04         MOV     R2,#0x4
   \   00012E   80F4         SJMP    ??ParkWay_ProcessEvent_10
    200          
    201              // return unprocessed events
    202              return (events ^ SYS_EVENT_MSG);
   \                     ??ParkWay_ProcessEvent_5:
   \   000130   EE           MOV     A,R6
   \   000131   FA           MOV     R2,A
   \   000132   EF           MOV     A,R7
   \   000133   6480         XRL     A,#0x80
   \   000135   FB           MOV     R3,A
   \   000136   02....       LJMP    ??ParkWay_ProcessEvent_11 & 0xFFFF
    203            }
    204          
    205            if(events & POLLING_OF_DEV_EVT)
   \                     ??ParkWay_ProcessEvent_0:
   \   000139   EE           MOV     A,R6
   \   00013A   5402         ANL     A,#0x2
   \   00013C   7003         JNZ     $+5
   \   00013E   02....       LJMP    ??ParkWay_ProcessEvent_12 & 0xFFFF
    206            {
    207              osal_start_timerEx( ParkWay_TaskID,
    208                                  POLL_PARWAY_EVT,
    209                                  TIME_PARKWAY_POLL);
   \   000141                ; Setup parameters for call to function osal_start_timerEx
   \   000141   7CD0         MOV     R4,#-0x30
   \   000143   7D07         MOV     R5,#0x7
   \   000145   7A03         MOV     R2,#0x3
   \   000147   7B00         MOV     R3,#0x0
   \   000149   90....       MOV     DPTR,#ParkWay_TaskID
   \   00014C   E0           MOVX    A,@DPTR
   \   00014D   F9           MOV     R1,A
   \   00014E   12....       LCALL   ??osal_start_timerEx?relay; Banked call to: osal_start_timerEx
    210              uart_init();
   \   000151                ; Setup parameters for call to function uart_init
   \   000151   12....       LCALL   ??uart_init?relay    ; Banked call to: uart_init
    211              SendUART("\n\rAP-0001",9);  
   \   000154                ; Setup parameters for call to function SendUART
   \   000154   7909         MOV     R1,#0x9
   \   000156   7A..         MOV     R2,#`?<Constant "\\n\\rAP-0001">` & 0xff
   \   000158   7B..         MOV     R3,#(`?<Constant "\\n\\rAP-0001">` >> 8) & 0xff
   \   00015A   12....       LCALL   ??SendUART?relay     ; Banked call to: SendUART
    212              uint8 i,i2;
    213              for(i=0;i<20;i++)
   \   00015D   75..00       MOV     ?V0,#0x0
    214              {
    215                if(DevListPW[i][0])
   \                     ??ParkWay_ProcessEvent_13:
   \   000160   E5..         MOV     A,?V0
   \   000162   75F006       MOV     B,#0x6
   \   000165   A4           MUL     AB
   \   000166   F8           MOV     R0,A
   \   000167   A9F0         MOV     R1,B
   \   000169   74..         MOV     A,#DevListPW & 0xff
   \   00016B   28           ADD     A,R0
   \   00016C   F582         MOV     DPL,A
   \   00016E   74..         MOV     A,#(DevListPW >> 8) & 0xff
   \   000170   39           ADDC    A,R1
   \   000171   F583         MOV     DPH,A
   \   000173   E0           MOVX    A,@DPTR
   \   000174   603F         JZ      ??ParkWay_ProcessEvent_14
    216                {
    217                  SendUART(",",1);  
   \   000176                ; Setup parameters for call to function SendUART
   \   000176   7901         MOV     R1,#0x1
   \   000178   7A..         MOV     R2,#`?<Constant ",">` & 0xff
   \   00017A   7B..         MOV     R3,#(`?<Constant ",">` >> 8) & 0xff
   \   00017C   12....       LCALL   ??SendUART?relay     ; Banked call to: SendUART
    218                  for(i2=0;i2<6;i2++)
   \   00017F   75..00       MOV     ?V1,#0x0
   \                     ??ParkWay_ProcessEvent_15:
   \   000182   85....       MOV     ?V2,?V1
   \   000185   E5..         MOV     A,?V0
   \   000187   75F006       MOV     B,#0x6
   \   00018A   A4           MUL     AB
   \   00018B   F8           MOV     R0,A
   \   00018C   A9F0         MOV     R1,B
   \   00018E   74..         MOV     A,#DevListPW & 0xff
   \   000190   28           ADD     A,R0
   \   000191   F8           MOV     R0,A
   \   000192   74..         MOV     A,#(DevListPW >> 8) & 0xff
   \   000194   39           ADDC    A,R1
   \   000195   F9           MOV     R1,A
   \   000196   E8           MOV     A,R0
   \   000197   25..         ADD     A,?V2
   \   000199   FE           MOV     R6,A
   \   00019A   E4           CLR     A
   \   00019B   39           ADDC    A,R1
   \   00019C   FF           MOV     R7,A
   \   00019D                ; Setup parameters for call to function SendUART
   \   00019D   7901         MOV     R1,#0x1
   \   00019F   EE           MOV     A,R6
   \   0001A0   FA           MOV     R2,A
   \   0001A1   EF           MOV     A,R7
   \   0001A2   FB           MOV     R3,A
    219                  {
    220                    SendUART(&DevListPW[i][i2],1);  
   \   0001A3   12....       LCALL   ??SendUART?relay     ; Banked call to: SendUART
    221                    DevListPW[i][i2] = 0;
   \   0001A6   8E82         MOV     DPL,R6
   \   0001A8   8F83         MOV     DPH,R7
   \   0001AA   E4           CLR     A
   \   0001AB   F0           MOVX    @DPTR,A
    222                  }
   \   0001AC   05..         INC     ?V1
   \   0001AE   E5..         MOV     A,?V1
   \   0001B0   C3           CLR     C
   \   0001B1   9406         SUBB    A,#0x6
   \   0001B3   40CD         JC      ??ParkWay_ProcessEvent_15
    223                }
    224              } 
   \                     ??ParkWay_ProcessEvent_14:
   \   0001B5   05..         INC     ?V0
   \   0001B7   E5..         MOV     A,?V0
   \   0001B9   C3           CLR     C
   \   0001BA   9414         SUBB    A,#0x14
   \   0001BC   40A2         JC      ??ParkWay_ProcessEvent_13
    225              SendUART("@",1);
   \   0001BE                ; Setup parameters for call to function SendUART
   \   0001BE   7901         MOV     R1,#0x1
   \   0001C0   7A..         MOV     R2,#`?<Constant "@">` & 0xff
   \   0001C2   7B..         MOV     R3,#(`?<Constant "@">` >> 8) & 0xff
   \   0001C4   12....       LCALL   ??SendUART?relay     ; Banked call to: SendUART
    226            }  
    227           
    228            return 0;
   \                     ??ParkWay_ProcessEvent_12:
   \   0001C7   7A00         MOV     R2,#0x0
   \   0001C9   7B00         MOV     R3,#0x0
   \                     ??ParkWay_ProcessEvent_11:
   \   0001CB   7F06         MOV     R7,#0x6
   \   0001CD   02....       LJMP    ?BANKED_LEAVE_XDATA
    229          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   F582         MOV     DPL,A
   \   000002   E4           CLR     A
   \   000003   35..         ADDC    A,?V1
   \   000005   F583         MOV     DPH,A
   \   000007   E0           MOVX    A,@DPTR
   \   000008   F8           MOV     R0,A
   \   000009   A3           INC     DPTR
   \   00000A   E0           MOVX    A,@DPTR
   \   00000B   22           RET
    230          
    231          
    232          
    233          static void ParkWay_ProcessZDOMsgs( zdoIncomingMsg_t *inMsg )
    234          {
    235            switch ( inMsg->clusterID )
    236            {
    237              case End_Device_Bind_rsp:
    238                if ( ZDO_ParseBindRsp( inMsg ) == ZSuccess )
    239                {
    240                  // Light LED
    241                  HalLedSet( HAL_LED_1, HAL_LED_MODE_ON );
    242                }
    243          #if defined( BLINK_LEDS )
    244                else
    245                {
    246                  // Flash LED to show failure
    247                  HalLedSet ( HAL_LED_1, HAL_LED_MODE_FLASH );
    248                }
    249          #endif
    250                break;
    251          
    252              case Match_Desc_rsp:
    253                {
    254                  ZDO_ActiveEndpointRsp_t *pRsp = ZDO_ParseEPListRsp( inMsg );
    255                  if ( pRsp )
    256                  {
    257                    if ( pRsp->status == ZSuccess && pRsp->cnt )
    258                    {
    259                      ParkWay_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
    260                      ParkWay_DstAddr.addr.shortAddr = pRsp->nwkAddr;
    261                      // Take the first endpoint, Can be changed to search through endpoints
    262                      ParkWay_DstAddr.endPoint = pRsp->epList[0];
    263          
    264                      // Light LED
    265                      HalLedSet( HAL_LED_1, HAL_LED_MODE_ON );
    266                    }
    267                    osal_mem_free( pRsp );
    268                  }
    269                }
    270                break;
    271            }
    272          }
    273          
    274          static void ParkWay_MessageMSGCB( afIncomingMSGPacket_t *pkt_1 )
    275          {
    276            uint8* pkt;
    277            
    278            pkt=(pkt_1->cmd.Data);
    279            
    280            uint8 i,dev=(((*(pkt+2)-48)*10)+(*(pkt+3)-48));
    281            
    282            for(i=0;i<6;i++)
    283            {
    284              DevListPW[dev][i]=*(pkt+i);
    285            } 
    286          }
    287          
    288          static void ParkWay_SendTheMessage( void )
    289          {
    290          }
    291          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    292          static void UART_CallBack(uint8 port, uint8 event)
   \                     UART_CallBack:
    293          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FF           MOV     R7,A
    294            (void)port;
    295            uint8 cmdbuff[1];
    296            if (event & (HAL_UART_RX_FULL | HAL_UART_RX_ABOUT_FULL | HAL_UART_RX_TIMEOUT))
   \   00000C   7407         MOV     A,#0x7
   \   00000E   5F           ANL     A,R7
   \   00000F   6014         JZ      ??UART_CallBack_0
    297            {
    298              HalUARTRead(port, cmdbuff, 1);
   \   000011                ; Setup parameters for call to function HalUARTRead
   \   000011   7C01         MOV     R4,#0x1
   \   000013   7D00         MOV     R5,#0x0
   \   000015   AA..         MOV     R2,?XSP + 0
   \   000017   AB..         MOV     R3,?XSP + 1
   \   000019   12....       LCALL   ??HalUARTRead?relay  ; Banked call to: HalUARTRead
    299              SendUART(cmdbuff,1);
   \   00001C                ; Setup parameters for call to function SendUART
   \   00001C   7901         MOV     R1,#0x1
   \   00001E   AA..         MOV     R2,?XSP + 0
   \   000020   AB..         MOV     R3,?XSP + 1
   \   000022   12....       LCALL   ??SendUART?relay     ; Banked call to: SendUART
    300            }
    301          }
   \                     ??UART_CallBack_0:
   \   000025   7401         MOV     A,#0x1
   \   000027   12....       LCALL   ?DEALLOC_XSTACK8
   \   00002A   02....       LJMP    ?Subroutine0 & 0xFFFF
    302          
    303          //This function initializes the UART

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    304          void uart_init()
   \                     uart_init:
    305          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 29
   \   000004   74E3         MOV     A,#-0x1d
   \   000006   12....       LCALL   ?ALLOC_XSTACK8
    306            halUARTCfg_t uartConfig;
    307            uartConfig.configured = TRUE; // 2x30 don't care - see uart driver.
   \   000009   85..82       MOV     DPL,?XSP + 0
   \   00000C   85..83       MOV     DPH,?XSP + 1
   \   00000F   7401         MOV     A,#0x1
   \   000011   F0           MOVX    @DPTR,A
    308            uartConfig.baudRate = HAL_UART_BR_9600;
   \   000012   12....       LCALL   ?XSTACK_DISP0_8
   \   000015   E4           CLR     A
   \   000016   F0           MOVX    @DPTR,A
    309            uartConfig.flowControl = TRUE;
   \   000017   7402         MOV     A,#0x2
   \   000019   12....       LCALL   ?XSTACK_DISP0_8
   \   00001C   7401         MOV     A,#0x1
   \   00001E   F0           MOVX    @DPTR,A
    310            uartConfig.flowControlThreshold = 48; // 2x30 don't care - see uart driver.
   \   00001F   7403         MOV     A,#0x3
   \   000021   12....       LCALL   ?XSTACK_DISP0_8
   \   000024   7430         MOV     A,#0x30
   \   000026   F0           MOVX    @DPTR,A
   \   000027   A3           INC     DPTR
   \   000028   E4           CLR     A
   \   000029   F0           MOVX    @DPTR,A
    311            uartConfig.rx.maxBufSize = 128; // 2x30 don't care - see uart driver.
   \   00002A   740A         MOV     A,#0xa
   \   00002C   12....       LCALL   ?XSTACK_DISP0_8
   \   00002F   7480         MOV     A,#-0x80
   \   000031   F0           MOVX    @DPTR,A
   \   000032   A3           INC     DPTR
   \   000033   E4           CLR     A
   \   000034   F0           MOVX    @DPTR,A
    312            uartConfig.tx.maxBufSize = 128; // 2x30 don't care - see uart driver.
   \   000035   7412         MOV     A,#0x12
   \   000037   12....       LCALL   ?XSTACK_DISP0_8
   \   00003A   7480         MOV     A,#-0x80
   \   00003C   F0           MOVX    @DPTR,A
   \   00003D   A3           INC     DPTR
   \   00003E   E4           CLR     A
   \   00003F   F0           MOVX    @DPTR,A
    313            uartConfig.idleTimeout = 6; // 2x30 don't care - see uart driver.
   \   000040   7405         MOV     A,#0x5
   \   000042   12....       LCALL   ?XSTACK_DISP0_8
   \   000045   7406         MOV     A,#0x6
   \   000047   F0           MOVX    @DPTR,A
    314            uartConfig.intEnable = TRUE; // 2x30 don't care - see uart driver.
   \   000048   7416         MOV     A,#0x16
   \   00004A   12....       LCALL   ?XSTACK_DISP0_8
   \   00004D   7401         MOV     A,#0x1
   \   00004F   F0           MOVX    @DPTR,A
    315            uartConfig.callBackFunc = UART_CallBack;
   \   000050   741B         MOV     A,#0x1b
   \   000052   12....       LCALL   ?XSTACK_DISP0_8
   \   000055   74..         MOV     A,#??UART_CallBack?relay & 0xff
   \   000057   F0           MOVX    @DPTR,A
   \   000058   A3           INC     DPTR
   \   000059   74..         MOV     A,#(??UART_CallBack?relay >> 8) & 0xff
   \   00005B   F0           MOVX    @DPTR,A
    316            HalUARTOpen (HAL_UART_PORT_0, &uartConfig);
   \   00005C                ; Setup parameters for call to function HalUARTOpen
   \   00005C   AA..         MOV     R2,?XSP + 0
   \   00005E   AB..         MOV     R3,?XSP + 1
   \   000060   7900         MOV     R1,#0x0
   \   000062   12....       LCALL   ??HalUARTOpen?relay  ; Banked call to: HalUARTOpen
    317          }
   \   000065   741D         MOV     A,#0x1d
   \   000067   12....       LCALL   ?DEALLOC_XSTACK8
   \   00006A   D083         POP     DPH
   \   00006C   D082         POP     DPL
   \   00006E   02....       LJMP    ?BRET
    318          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    319          void SendUART(uint8 *data,uint8 len)
   \                     SendUART:
    320          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
    321            HalUARTWrite(HAL_UART_PORT_0, data, len);
   \   000006                ; Setup parameters for call to function HalUARTWrite
   \   000006   FC           MOV     R4,A
   \   000007   7D00         MOV     R5,#0x0
   \   000009   7900         MOV     R1,#0x0
   \   00000B   12....       LCALL   ??HalUARTWrite?relay ; Banked call to: HalUARTWrite
    322          }
   \   00000E   7F02         MOV     R7,#0x2
   \   000010   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ParkWay_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ParkWay_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ParkWay_ProcessEvent?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ParkWay_ProcessEvent

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??UART_CallBack?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    UART_CallBack

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??uart_init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    uart_init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SendUART?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SendUART

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "ParkWay-Coord">`:
   \   000000   5061726B     DB "ParkWay-Coord"
   \            5761792D
   \            436F6F72
   \            6400    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n\\rAP-0001">`:
   \   000000   0A0D4150     DB "\012\015AP-0001"
   \            2D303030
   \            3100    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant ",">`:
   \   000000   2C00         DB ","

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "@">`:
   \   000000   4000         DB "@"
    323          
    324          
    325          static void ParkWay_HandleKeys( uint8 shift, uint8 keys )
                             ^
Warning[Pe177]: function "ParkWay_HandleKeys" was declared but never referenced

  static void ParkWay_SendTheMessage( void )
              ^
"C:\Texas Instruments\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\ParkWay\Source\PW_Coordinator.c",288  Warning[Pe177]: 
          function "ParkWay_SendTheMessage" was declared but never referenced
    326          {
    327          }
    328          /*********************************************************************/

   Maximum stack usage in bytes:

   ISTACK XSTACK Function
   ------ ------ --------
      0      9   ParkWay_Init
        0      9   -> HalLcdWriteString
        0      9   -> RegisterForKeys
        0      9   -> ZDO_RegisterForZDOMsg
        0      9   -> afRegister
        0      9   -> osal_start_timerEx
      1     14   ParkWay_ProcessEvent
        0     14   -> HalLedSet
        0     14   -> SendUART
        0     14   -> ZDO_ParseEPListRsp
        0     14   -> osal_mem_free
        0     14   -> osal_msg_deallocate
        0     14   -> osal_msg_receive
        0     14   -> osal_start_timerEx
        0     14   -> uart_init
      0     24   SendUART
        0     10   -> HalUARTWrite
      0     10   UART_CallBack
        0     10   -> HalUARTRead
        0     10   -> SendUART
      2     43   uart_init
        2     29   -> HalUARTOpen


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
       2  ?<Constant ",">
       2  ?<Constant "@">
      14  ?<Constant "ParkWay-Coord">
      10  ?<Constant "\n\rAP-0001">
       6  ??ParkWay_Init?relay
       6  ??ParkWay_ProcessEvent?relay
       6  ??SendUART?relay
       6  ??UART_CallBack?relay
       6  ??uart_init?relay
       5  ?Subroutine0
      12  ?Subroutine1
     120  DevListPW
       2  ParkWay_ClusterList
      12  ParkWay_DstAddr
     122  ParkWay_Init
       1  ParkWay_NwkState
     464  ParkWay_ProcessEvent
      12  ParkWay_SimpleDesc
       1  ParkWay_TaskID
       1  ParkWay_TransID
       6  ParkWay_epDesc
      19  SendUART
      45  UART_CallBack
     113  uart_init

 
 780 bytes in segment BANKED_CODE
  30 bytes in segment BANK_RELAYS
  42 bytes in segment XDATA_ROM_C
 141 bytes in segment XDATA_Z
 
 810 bytes of CODE  memory
  42 bytes of CONST memory
 141 bytes of XDATA memory

Errors: none
Warnings: 7
